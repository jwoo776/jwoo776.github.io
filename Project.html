<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="http://npmcdn.com/leaflet@0.7.7/dist/leaflet.css" />
	<script src="http://npmcdn.com/leaflet@0.7.7/dist/leaflet.js"></script>
	
    <style>
	.info {
    padding: 8px;
    font: 14px font, sans-serif;
    background: black;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 0px;
}
.info h4 {
    margin: 0 0 5px;
    color: #777;
}
  
        
.legend {
text-align: left;
line-height: 22px;
color: #555;
font-weight: bold;



}
.legend i {
width: 18px;
height: 18px;
float: left;
margin-right: 8px;
opacity: 0.7;
line-height: 10px;
font-weight: normal;
}

</style>
<title>Lab4</title></head>
<body style="width: 100%; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); background-image: url(lgrey011.jpg);" alink="black" link="black" vlink="black">
<table style="width: 80%; height: 100%; text-align: left; margin-left: auto; margin-right: auto;" border="0" cellpadding="2" cellspacing="20">
<tbody>
<tr>
<td style="width: 100%;">
<table style="text-align: left; width: 979px; height: 155px;" border="0" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="width: 80%; text-align: center;">
<h2><big>Geography 771</big></h2>
<big><span style="font-family: Times New Roman;">University
of Auckland</span><br style="font-family: Times New Roman;">
<span style="font-family: Times New Roman;">Jayden
Woodhead</span></big></td>
<td style="width: 20%;"><img style="width: 288px; height: 144px;" alt="" src="new-zealand-1184112__340.jpg"><br></td>
</tr>
</tbody>
</table>
<table style="text-align: left; background-color: rgb(153, 153, 153); width: 100%;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="width: 15%;"><a href="index.html">Home</a></td>
<td style="width: 15%;"><a href="Lab2.html">Lab
2</a></td>
<td style="width: 15%;"><a href="Lab3.html">Lab
3</a></td>
<td style="width: 15%;"><a href="Lab4.html">Lab
4</a></td>
<td style="width: 15%;"><a href="Lab5.html">Lab
5</a></td>
<td style="width: 15%;"><a href="Project.html">Project</a></td>
</tr>
</tbody>
</table>
    <table style="width: 80%; text-align: left; margin-left: auto; margin-right: auto;" border="0" cellpadding="2" cellspacing="2">
                <tbody>
                <tr>
                    <td>
                        <h1>Vehicle Accidents On Auckland Roadways (2000-2014)</h1>
                    </td>
                </tr>
                </tbody>
            </table>
    <body>
<div id="mymap" style="height: 600px; width: 100%;"></div>
            <div style="text-align: center;"></div>
<script type="text/javascript" src="project.js"></script>
	<script>

		var mymap = L.map('mymap').setView([-36.6924, 174.8323], 9);
CartoDB_Positron = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
			maxZoom: 18,
			attribution: '&copy;  <a href="http://cartodb.com/attributions">CartoDB</a>' +  '  Data:  <a href="https://hackakl.koordinates.com/">HackAKL, </a>',
			id: 'mapbox.streets'
		}).addTo(mymap);
        
        </script>

		<script> 
            
L.geoJson(hex).addTo(mymap)
function getColor(d) {
    return d > 10000 ? '#67000d' :
           d > 1000 ? '#a80f15' :
           d > 100 ? '#f75d41' :
           d > 10 ? '#fca386' :
		   d > 1 ? '#fee3d6' :
		   d = 0 ? '#fff2df' :
                      '#ffffff';
}
function style(feature) {
    return {
        fillColor: getColor(feature.properties.COUNT),
        weight: 1,
        opacity: 1,
        color: '3',
        fillOpacity: 0.4
    };
}
L.geoJson(hex, {style: style}).addTo(mymap);

var geoJson

function highlightFeature(e) {
    var layer = e.target;

    layer.setStyle({
        weight: 3,
        color: '#666',
        
        fillOpacity: 0
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        
        layer.bringToFront();
    }
    info.update (layer.feature.properties);
}
        
geojson = L.geoJson(hex, {style: style}).addTo(mymap); 
        
function resetHighlight(e) {
    geojson.resetStyle(e.target);
}
geojson = L.geoJson(hex, {style: style}).addTo(mymap)

function onEachFeature(feature, layer) {
    layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
		})
		}
        
	geojson = L.geoJson(hex, {
    style: style,
    onEachFeature: onEachFeature
}).addTo(mymap);	
        

var info = L.control();

info.onAdd = function (mymap) {
    this._div = L.DomUtil.create('div', 'info'); 
    this.update();
    return this._div;
};

info.update = function (props) {
    if ( props ) {
       this._div.innerHTML = '<h4> Crash Incidents</h4>' + (props ?  props.COUNT +' Total Crashes ' : 'Since January 2013')  + (props ? props.CRASH_FATA + ' Fatal Crashes ' : 'Since January 2013') + (props ? props.CRASH_SEV_ + ' Severe Crashes ' : 'Since January 2013') + (props ? props.CRASH_MIN_ + ' Minimal Damage Crashes ' : 'Since January 2013');
    } else {
	   this._div.innerHTML = '';
    }
};

info.addTo(mymap);

var legend = L.control({position: 'bottomright'});

legend.onAdd = function (mymap) {

    var div = L.DomUtil.create('div', 'info legend'),
        grades = [0, 1, 10, 100, 1000, 10000],
		key_labels = ["0", "1-10", "10-100", "100-1000", "1000-10000", ">10000", ],
       labels = ["Total Crashes"],
	from,to;

for (var i = 0; i < grades.length; i++) {
from = grades[i];
to = grades[i + 1];
labels.push(
'<i style="background:' + getColor(from + 1) + '"></i> ' +
key_labels[i]);
}
div.innerHTML = labels.join('<br>');
return div;
};
        
        
legend.addTo(mymap); 


        
		</script>
</body>
<br>
<br>Hexbins are a great way to visualise large data sets that are located in concentrated area. They provide a great amount of user interactivity while reducing clutter. The dataset that the map above displays is vehicle crash data obtained from HackAKL and includes 65,535 unique events over the greater Auckland region. The dataset also provided data not used by this map such as vehicle type, time/date of event, road names, known causes, objects struck, road curvature, wet/dry roads, and several others. The map produced focuses on the number of events and their severity. This scope was chosen as it allows for the visualisation of Aucklandâ€™s most dangerous roads in six unique categories. This map was generated using QGIS with the added MMQGIS plugin added with a background map provided by CartoDB.  <br>
<br>
<div style="text-align: center;"></div>
</td>
</tr>
</tbody>
</table>
<br>
</body></html>